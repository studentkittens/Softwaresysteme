<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>go-lang</title><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><meta name="author" content="Christopher Pahl, Christoph Piechula"></meta><meta name="description" content="The Hovercraft! tutorial."></meta><meta name="keywords" content="presentation, backend, impress.js, hovercraft, go-lang"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="presentation.css" media="screen,projection"></link></head><body class="impress-not-supported"><div id="impress"><div class="step" step="0" id="first" data-x="0" data-y="0"><p>Google Go
<span class="tiny">(2&#xBD;)</span></p><img src="images/gopherswrench.png" alt="" width="70%" height=""></img><div class="notes"><p>Wir haben eine sehr go-reiche Woche gehabt.</p><p>Umfrage: Wer hat go gemacht seit dem letzten mal?</p><p>Wir werden die n&#xE4;chsten 40 Minuten etwas schneller reden.</p><p>Agenda:</p><blockquote><ul><li>Einf&#xFC;hrung</li><li>&#xDC;berblick wie GO Entwicklung aussieht/Demo</li><li>Spracheinf&#xFC;hrung</li><li>&#xDC;bung</li><li>Go extended features</li><li>&#xDC;berraschung</li></ul></blockquote><p>Das wird kein Go Tutorium, es geht uns eher drum dass ihr einfach mal
so seht wie die Sprache so aussieht und wie man damit Probleme l&#xF6;st.</p><p>Neue Sprachen lernen erfordert leider immer noch &#xDC;bung :)</p><p>Das ist &#xFC;brigens immer noch gopher. Wir m&#xF6;gen ihn auch immer noch.
Er ist immer noch putzig.</p></div></div><div class="step" step="1" data-x="1600" data-y="0"><p><span class="blocky">Was ist Go</span></p><div class="notes"><ul><li>Aktuelle Version: 1.4 (Dezemeber 2014)</li><li>Drei haben Erfahrung mit Sprachdesign</li><li>Go hat durchdachtes Design an vielen Ecken</li></ul></div><p><em>Eine Programmiersprache.</em></p><ul><li>Erster Release <em>2009.</em> Stable 1.0 version seit <em>2012</em></li><li>Nebenl&#xE4;ufig, imperativ &amp; objektorientiert.</li><li>Von <em>Ken Thompson</em>, <em>Rob Pike</em> &amp; <em>Robert Griesemer</em>.</li><li>Strong &amp; Static (Duck) typing; Garbage collected.</li></ul><p>,, <strong>Java</strong> tries to be successor of <strong>C++</strong>.''</p><p>,, <strong>Go</strong> a successor of <strong>C</strong>. ''</p><img src="images/ken.png" alt="" width="" height=""></img></div><div class="step" step="2" data-x="3200" data-y="0"><div class="notes"><ul><li>Nachbesserung zum letzten Mal -&gt; doch viel Go im ,,backend''</li><li>Dropbox -&gt; Performancekritische sachen in Go</li><li>Github, Youtube -&gt; Backendinfrastruktur teile in Go</li></ul></div><p><span class="blocky">Go Projekte</span></p><p>Bei genauerer Betrachtung schon einige:</p><ul><li>Google Doodles</li><li>Google App Engine</li><li>Youtube</li><li>Docker</li><li>Dropbox</li><li>&#x2026;</li></ul><p>Allgemein, viele Backendprojekte:</p><img src="images/appengine.png" alt="" width="15%" height=""></img><img src="images/docker.png" alt="" width="15%" height=""></img><img src="images/doodle.png" alt="" width="30%" height=""></img><img src="images/dropbox.png" alt="" width="15%" height=""></img><img src="images/youtube.png" alt="" width="20%" height=""></img></div><div class="step" step="3" data-x="4800" data-y="0"><p><span class="blocky">Hello World</span></p><div class="notes"><ul><li>Go sieht aus wie C von Python vergewaltigt</li><li>Konstrukte beider Sprachen eingeflo&#xDF;en</li><li>&lt;&lt; Folie erkl&#xE4;ren &gt;&gt;</li><li>&lt;&lt;&lt; JETZT ERSTMAL SWITCH ZUR N&#xE4;chste FOLIE &gt;&gt;&gt;</li></ul></div><pre class="highlight code go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">"os"</span>
<span class="kn">import</span> <span class="s">"fmt"</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">)</span> <span class="p">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">"mandarin"</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Hello, &#x4E16;&#x754C;"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div><div class="step" step="4" data-x="6400" data-y="0"><p><span class="blocky">Demo</span></p><div class="notes"><ul><li>Jetzt werden wir praktische</li><li>GOPATH zeigen, workspace zeigen</li><li>cd ~/go/bin/</li><li>mkdir -p src/github.com/qitta/helloworld</li><li>cd src/github.com/qitta/helloworld</li><li>go tool (go help zeigen)</li><li><dl><dt>Tools: debugger, profiler, documentation tool, formatter, static analyzer,</dt><dd><p>build system, package manager... und compiler.</p></dd></dl></li><li>vim helloworld.go  # go fmt erw&#xE4;hnen, go def, autocompletion, go lint</li><li>go install / go build/ go run</li><li>Es kompiliert so schnell dass man es als Skriptsprache nehmen kann: go run</li><li>ausf&#xFC;hren helloworld</li><li>vim helloworld_test.go</li><li>go test</li><li>vim helloworld_test.go # benchmark schreiben</li><li>go test -bench Add</li><li>debugger: man kann den standard gdb verwenden.</li></ul></div><pre class="highlight code bash"><span class="nv">$ </span>go <span class="nb">help</span></pre></div><div class="step" step="5" data-x="8000" data-y="0"><p><span class="blocky">Datentypen</span></p><div class="notes"><ul><li>&lt;&lt;&lt; GO Playground googeln &gt;&gt;&gt;</li><li>Umgekehrte Typreihenfolge</li><li><dl><dt>Standarddatentypen wie bei jeder anderen Programmiersprache.</dt><dd><p>(int, float, byte, rune, string).</p></dd></dl></li><li>Kurzschreibweise nur innerhalb Funktionen erlaubt.</li><li>Unicode Bezeichner sind &#xFC;brigens erlaubt.</li><li>Kein up/downcasting wie in C/Java.</li><li>Keine Pointerarithmetik</li><li>Variablen immer definiert auf nil/0 etc</li><li>Maps immer typisiert</li><li>Interne Verarbeitung UTF8</li></ul></div><p><strong>Primitive Datentypen:</strong></p><pre class="highlight code go"><span class="kd">var</span> <span class="nx">name</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">"Berta"</span>    <span class="c1">// Normale Schreibweise
</span><span class="err">&#x394;</span><span class="nx">time</span> <span class="o">:=</span> <span class="mf">42.0</span>                <span class="c1">// Kurzschreibweise (inferred)
</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="s">"Helmut"</span> <span class="c1">// Multiple Zuweisung
</span><span class="kd">var</span> <span class="nx">balance</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>   <span class="c1">// Explizite Konversion
</span><span class="kd">var</span> <span class="nx">pb</span> <span class="o">*</span><span class="kt">int</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">balance</span>       <span class="c1">// Pointer zu balance. (iiih!)</span></pre><p><strong>Maps:</strong></p><pre class="highlight code go"><span class="nx">hostToIP</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">)</span>            <span class="c1">// Hashtable
</span><span class="nx">hostToIP</span><span class="p">[</span><span class="s">"localhost"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"127.0.0.1"</span>            <span class="c1">// Zuweisung</span></pre><p><strong>Arrays &amp; Slices:</strong></p><pre class="highlight code go"><span class="nx">animals</span> <span class="o">:=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">"cat"</span><span class="p">,</span> <span class="s">"moose"</span><span class="p">,</span> <span class="s">"owl"</span><span class="p">}</span>  <span class="c1">// Array
</span><span class="nx">saneAnimals</span> <span class="o">:=</span> <span class="nx">animals</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>                     <span class="c1">// Slices
</span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">animals</span><span class="p">,</span> <span class="nx">saneAnimals</span><span class="p">)</span>
<span class="cm">/* &#x21A6; [cat moose owl] [cat moose] */</span></pre></div><div class="step" step="6" data-x="9600" data-y="0"><p><span class="blocky">if</span></p><div class="notes"><ul><li>Entpspricht C meist</li><li>Unterschied: Kein Klammern () -&gt; Go Blocks {}</li><li>&lt;&lt; Folie erkl&#xE4;ren &gt;&gt;</li></ul></div><pre class="highlight code go"><span class="k">if</span> <span class="nx">name</span> <span class="o">==</span> <span class="s">"wolfgang"</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"vermutlich m&#xE4;nnlich."</span><span class="p">)</span>
<span class="p">}</span></pre><p>Mit optionaler Kurzdeklaration:</p><pre class="highlight code go"><span class="k">if</span> <span class="nx">personId</span> <span class="o">:=</span> <span class="nx">GetId</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="nx">personId</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Person ID was"</span><span class="p">,</span> <span class="nx">personId</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">personId</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Placeholder person id."</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Invalid person."</span><span class="p">)</span>
<span class="p">}</span></pre></div><div class="step" step="7" data-x="11200" data-y="0"><p><span class="blocky">switch</span></p><pre class="highlight code go"><span class="k">switch</span> <span class="nx">os</span> <span class="o">:=</span> <span class="nx">runtime</span><span class="p">.</span><span class="nx">GOOS</span><span class="p">;</span> <span class="nx">os</span> <span class="p">{</span>
<span class="k">case</span> <span class="s">"linux"</span><span class="p">:</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"[good descision!]"</span><span class="p">)</span>
    <span class="k">fallthrough</span>
<span class="k">default</span><span class="p">:</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">"%s."</span><span class="p">,</span> <span class="nx">os</span><span class="p">)</span>
<span class="p">}</span></pre><p>Bedingungsloses <tt>switch</tt> als <tt>if/else</tt> Ersatz:</p><pre class="highlight code go"><span class="k">switch</span> <span class="nx">now</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">();</span> <span class="p">{</span>
<span class="k">case</span> <span class="nx">now</span><span class="p">.</span><span class="nx">Hour</span><span class="p">()</span> <span class="p">&lt;</span> <span class="mi">13</span><span class="p">:</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Guten Morgen!"</span><span class="p">)</span>
<span class="k">case</span> <span class="nx">now</span><span class="p">.</span><span class="nx">Hour</span><span class="p">()</span> <span class="p">&lt;</span> <span class="mi">17</span><span class="p">:</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Guten Nachmittag!"</span><span class="p">)</span>
<span class="k">default</span><span class="p">:</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Guten Abend."</span><span class="p">)</span>
<span class="p">}</span></pre></div><div class="step" step="8" data-x="12800" data-y="0"><p><span class="blocky">for</span></p><div class="notes"><ul><li>Kein Preinkrement</li><li>Kein while loop, nur for. Auch for range.</li><li>Man kann alles weglassen. -&gt; Endlosschleife</li></ul></div><p><strong>Normales</strong>   <tt>C for</tt>:</p><pre class="highlight code go"><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
    <span class="c1">// &#x2026;
</span><span class="p">}</span></pre><p><tt>while</tt>  <strong>Schleife</strong>:</p><pre class="highlight code go"><span class="k">for</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">something</span>  <span class="p">{</span>
        <span class="k">break</span>  <span class="c1">// or continue
</span>    <span class="p">}</span>
<span class="p">}</span></pre><p><tt>foreach</tt> <strong>Schleife</strong>:</p><pre class="highlight code go"><span class="k">for</span> <span class="nx">host</span><span class="p">,</span> <span class="nx">ip</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">hostToIP</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">host</span><span class="p">,</span> <span class="s">"&#x21A6;"</span><span class="p">,</span> <span class="nx">ip</span><span class="p">)</span>
<span class="p">}</span></pre></div><div class="step" step="9" data-x="14400" data-y="0"><p><span class="blocky">func</span></p><div class="notes"><ul><li>&lt;&lt;&lt; Folie erkl&#xE4;ren &gt;&gt;&gt;</li><li>Go hat keine Defaultparameter. Leider.</li><li>Man kann auch return values benennen und sie dadurch direkt setzen.</li></ul></div><pre class="highlight code go"><span class="kd">func</span> <span class="nx">GetCoolnesFactor</span><span class="p">(</span><span class="nx">language</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="nx">language</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s">"java"</span><span class="p">:</span>   <span class="k">return</span> <span class="mi">1</span>
        <span class="k">case</span> <span class="s">"python"</span><span class="p">:</span> <span class="k">return</span> <span class="mi">7</span>
        <span class="k">case</span> <span class="s">"golang"</span><span class="p">:</span> <span class="k">return</span> <span class="mi">8</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span></pre><p><strong>Fehlerbehandlung mit mehreren R&#xFC;ckgabewerten:</strong></p><pre class="highlight code go"><span class="kd">func</span> <span class="nx">div</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nx">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">"divisor should not be 0"</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">/</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="o">%</span> <span class="nx">b</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">}</span></pre></div><div class="step" step="10" data-x="16000" data-y="0"><p><span class="blocky">Closures</span></p><div class="notes"><ul><li>Go unterst&#xFC;tzt Higher Order Functions</li><li>Closure = anonyme Funktion die auf Erstellungskontext zugreifen kann.</li><li>Python &#xE4;hnliche Generatoren.</li></ul></div><pre class="highlight code go"><span class="kd">func</span> <span class="nx">fibonacciEngine</span><span class="p">()</span> <span class="kd">func</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="nx">f1</span><span class="p">,</span> <span class="nx">f2</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="kd">func</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
        <span class="nx">f2</span><span class="p">,</span> <span class="nx">f1</span> <span class="p">=</span> <span class="nx">f1</span> <span class="o">+</span> <span class="nx">f2</span><span class="p">,</span> <span class="nx">f2</span>
        <span class="k">return</span> <span class="nx">f1</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fib</span> <span class="o">:=</span> <span class="nx">fibonacciEngine</span><span class="p">()</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">fib</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div><div class="step excercise1" step="11" data-x="17600" data-y="0"><div class="notes"><ul><li>Kommen wir zur ersten Aufgabe von 20 heute..</li><li>2-3 Minuten Pause.</li><li>Zeit 5-10 Minuten, der erste bekommt Kekse!</li><li>Startwert f&#xFC;r z ausw&#xE4;hlen (1.0)</li><li>Iterativ z berechnen, zur&#xFC;ckgeben. (wieviel reichen denn aus?)</li><li>Plus: Iteration bei geringem Delta abbrechen.</li><li>Name: Newtonsche Quadratwurzelann&#xE4;herung</li><li>Als n&#xE4;chstes Extended Features von Go</li></ul></div><p><span class="blocky">Aufgabe 1/20</span></p><img src="images/newton.png" alt="" width="" height=""></img><p><em>Quadratwurzel iterativ selber approximieren:</em></p><pre class="highlight code go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">"fmt"</span>
<span class="kn">import</span> <span class="s">"math"</span>

<span class="kd">func</span> <span class="nx">Sqrt</span><span class="p">(</span><span class="nx">x</span> <span class="kt">float64</span><span class="p">)</span> <span class="kt">float64</span> <span class="p">{</span>
    <span class="c1">// &#x2026;?
</span><span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">better</span><span class="p">,</span> <span class="nx">worse</span> <span class="o">:=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Sqrt</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="nx">Sqrt</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">"%g - %g = %g"</span><span class="p">,</span> <span class="nx">better</span><span class="p">,</span> <span class="nx">worse</span><span class="p">,</span> <span class="nx">better</span> <span class="o">-</span> <span class="nx">worse</span><span class="p">)</span>
<span class="p">}</span></pre><p><em>Web-Playground:</em> <a href="https://play.golang.org/">https://play.golang.org/</a></p></div><div class="step" step="12" data-x="19200" data-y="0"><p><span class="blocky">OOP</span></p><div class="notes"><p>&lt;explain slide&gt;</p><ul><li>In anderen Sprachen: Klassen, Objekte, Instanzen</li><li>In Go: Typen, Interfaces (was sind Typen sind) und Values</li><li>Interfaces: Sammlung von Methoden.</li><li>Unterschied philsophischer Natur</li><li>Duck typing Prinzip (wenn es sich wie ne Katze benutzt werden kann, ist es ne Katze)</li></ul></div><p><strong>Go</strong> hat eigentlich keine Klassen oder Vererbung.</p><pre class="highlight code go"><span class="kd">type</span> <span class="nx">Animal</span> <span class="kd">interface</span> <span class="p">{</span>
    <span class="nx">getName</span><span class="p">()</span> <span class="kt">string</span>   <span class="c1">// Interface-Anforderung
</span><span class="p">}</span>

<span class="kd">type</span> <span class="nx">Cat</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Name</span> <span class="kt">string</span>        <span class="c1">// Membervariable
</span><span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">Cat</span><span class="p">)</span> <span class="nx">getName</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">Name</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">GreetAnimal</span><span class="p">(</span><span class="nx">animal</span> <span class="nx">Animal</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Hello, "</span> <span class="o">+</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">getName</span><span class="p">())</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">GreetAnimal</span><span class="p">(</span><span class="nx">Cat</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">"Garfield"</span><span class="p">})</span>
<span class="p">}</span></pre></div><div class="step" step="13" data-x="20800" data-y="0"><p><span class="blocky">Packages</span></p><div class="notes"><ul><li>Ein Paket kann auf mehrere Dateien mit selben package xy aufgeteilt sein.</li><li>Public/Private durch Gro&#xDF;/kleinschreibung definiert.</li><li>import durch vollen packagenamen, nutzung durch letzten teil. (fmt.Xy)</li><li>Mainmethode immer im package main.</li></ul></div><p><tt>$GOPATH/github.com/studentkittens/tux/tux.go</tt></p><pre class="highlight code go"><span class="kn">package</span> <span class="nx">tux</span>

<span class="kd">func</span> <span class="nx">Name</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">return</span> <span class="s">"Tux"</span>
<span class="p">}</span></pre><p><tt>$GOPATH/main.go</tt></p><pre class="highlight code go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"github.com/studentkittens/tux"</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">tux</span><span class="p">.</span><span class="nx">Name</span><span class="p">())</span>
<span class="p">}</span></pre></div><div class="step" step="14" data-x="22400" data-y="0"><p><span class="blocky">Errors</span></p><div class="notes"><ul><li>&lt;&lt; Folie erkl&#xE4;ren &gt;&gt;</li><li>defer erkl&#xE4;ren.</li><li>Beispiele sind &#xE4;quivalent. (Auch python context manager)</li><li>Die Beispiele sind sogar (fast) gleich lang!</li><li>Es gibt auch noch panic + defer/recover.</li><li>Die sind aber mehr f&#xFC;r ernste absolute unerwartete Fehler.</li></ul></div><p><strong>Python:</strong></p><pre class="highlight code python"><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/nope'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="k">except</span> <span class="n">FileNotFoundError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Dude?!'</span><span class="p">)</span></pre><p>Das Gleiche in <strong>Go</strong>:</p><pre class="highlight code go"><span class="k">if</span> <span class="nx">fd</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="s">"/nope"</span><span class="p">);</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">defer</span> <span class="nx">fd</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">ioutil</span><span class="p">.</span><span class="nx">ReadFile</span><span class="p">(</span><span class="nx">fd</span><span class="p">))</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"Dude?!"</span><span class="p">)</span>
<span class="p">}</span></pre></div><div class="step heading" step="15" data-x="24000" data-y="0"><p><span class="blocky">Goroutinen</span></p><p>Parallele <strong>Go</strong> Entsprechung eines <strong>Python</strong> Generator:</p><div class="notes"><ul><li>Go ist eine Sprache wo parallele Programmierung sehr einfach ist, da in
Sprache eingebaut.</li><li>Man kann einfach durch go func() Aufgaben <em>nebenl&#xE4;ufig</em> starten.</li><li>Go routinen sind nicht nur nebenl&#xE4;ufig sondern meist auch parallel... aber! achtung!</li><li>Go hat einen eigenen Scheduler der die go routinen auf tats&#xE4;chliche threads
aufteilt. Ob eine go routine tats&#xE4;chlich parallel ist, ist ein
"Implementierungsdetail"</li></ul><blockquote><ul><li>Channels erkl&#xE4;ren, gepuffer, ungepuffert</li><li>unterschied zu anderen sprachen: man ben&#xF6;tigt eine threadlib und zB
AsyncQueues zur Kommunikation</li><li>Folie erkl&#xE4;ren</li></ul></blockquote></div><p><em>Go routines:</em></p><pre class="highlight code go"><span class="kd">func</span> <span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">c</span> <span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">c</span> <span class="o">&lt;-</span> <span class="nx">y</span>
        <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">=</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span>
    <span class="p">}</span>
    <span class="nb">close</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">c</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">go</span> <span class="nx">fibonacci</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">c</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div><div class="step" step="16" data-x="25600" data-y="0"><p><span class="blocky">select</span></p><div class="notes"><ul><li>In go kann man sich mit den eingebauten Mitteln sehr einfach einen
Eventloop bauen</li><li>Ein Eventloop wird ja in der asynchronen programmierung genutzt um
bei auftreteten Ereignissen reagieren zu k&#xF6;nnen. So k&#xF6;nnen nichtblockend v
viele Ereignisse nebenl&#xE4;ufig abgearbeitet werden.</li><li>[Vergleich select mit socket-select bei linux]</li><li>tick ist ein channel</li><li>&lt;&lt;&lt; folie erkl&#xE4;ren &gt;&gt;&gt;</li></ul></div><p>Ein simpler <strong>Eventloop</strong> in <strong>Go</strong>:</p><pre class="highlight code go"><span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">tick</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Tick</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
    <span class="nx">boom</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">After</span><span class="p">(</span><span class="mi">500</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">{</span>
        <span class="k">select</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">tick</span><span class="p">:</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"tick."</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">&lt;-</span><span class="nx">boom</span><span class="p">:</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"BOOM!"</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">"    ."</span><span class="p">)</span>
            <span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="mi">50</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></pre></div><div class="step" step="17" data-x="27200" data-y="0"><p><span class="blocky">Pluspunkte</span></p><ul><li>Beinahe die Schnelligkeit von <strong>C</strong>&#x2026;</li><li>&#x2026;kombiniert mit der Einfachheit und K&#xFC;rze von <strong>Python</strong>.</li><li>Gro&#xDF;e Standardlibrary (<strong>Batteries included</strong>; <em>Websockets!</em>)</li><li>Kompiliert schnell genug um als <strong>Skriptsprache</strong> zu dienen.</li><li>Viele g&#xE4;ngige <strong>Werkzeuge</strong> sind Bestandteil der Sprache.</li><li><strong>Open Source</strong> und von <strong>Google</strong> supported.</li><li>Einfaches <strong>Deployement</strong>. (<em>eine statische gelinkte Binary</em>)</li></ul></div><div class="step" step="18" data-x="28800" data-y="0"><div class="notes"><p>GObject -&gt; Gtk und co.</p><p>Viele Leute wollen Go wie ihre gewohnte Sprache benutzen.
Doofe Idee, aber Menschen sind halt Gewohnheitstiere.</p><p>Man kann mit varargs optionale parameter faken.</p></div><p><span class="blocky">Minuspunkte</span></p><ul><li>Ungewohnt &#x23AF; vor allem f&#xFC;r <strong>Java</strong> Programmierer.</li><li>Einige <strong>fehlende Bibliotheken</strong> (<em>GObject!</em>) noch nicht portiert.</li><li><strong>Binaries</strong> sind ein bisschen <strong>gro&#xDF;</strong> (<em>~2 MB per HelloWorld</em>)</li><li>Noch keine <strong>Generics</strong>. <em>(&#x2026;Nachteil?)</em></li><li>Keine <strong>Listcomprehensions</strong>. (&#x1F615;)</li><li>Keine <strong>Defaultparameter</strong>. (&#x1F61E;)</li><li>Wenige Go-Programmierer auf dem <strong>Markt</strong>. (&#x1F603;)</li></ul></div><div class="step" step="19" id="catlight" data-x="30400" data-y="0"><div class="notes"><ul><li>Wir haben euch auch noch ein kleines Beispiel mitgebracht</li><li>Vorher: kleines Beispiel mit Martini</li><li>Heute: Kleiner Webserver mit der standard net/http lib.</li></ul></div><p><span class="blocky">Catlight Demo</span></p><img src="images/catlight.png" alt="" width="" height=""></img><p><strong>(...oder wie Gopher Licht ins Dunkel brachte)</strong></p></div><div class="step" step="20" id="fin" data-x="32000" data-y="0"><div class="notes"><p>BOOK!</p><p>If you really want to dive in Go, I can recommend those:</p></div><p><span class="blocky">Letzte Worte</span></p><blockquote><p><a href="https://tour.golang.org/">https://tour.golang.org/</a></p><p><a href="https://gobyexample.com/">https://gobyexample.com/</a></p></blockquote><div class="line-block"><br></br><br></br></div><p><strong>(Fragen?)</strong></p></div></div><div id="hovercraft-help"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Left, Down, Page Down</th><td>Next slide</td></tr><tr><th>Right, Up, Page Up</th><td>Previous slide</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>